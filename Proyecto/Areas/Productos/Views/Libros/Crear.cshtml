@model LibrosModel

@{
    ViewData["Title"] = "Crear Libro";
}

<h1 class="text-center">Crear nuevo libro</h1>

<div class="float-end"><a asp-action="Index" asp-controller="Libros" class="btn btn-secondary">Volver al Inicio</a></div>
<hr />
<br />

<form asp-controller="Libros" asp-action="Crear" method="post" class="mt-4" enctype="multipart/form-data">
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="container">
            <div class="col-lg-12 col-md-12 col-sm-12 text-center">
                <label>Subir Imagen</label>
                <center>
                    <img class="img-square" id="preview" src="data:image/gif;base64,R0lGODlhAQABAIAAAHd3dwAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" alt="Imagen previa" width="70" height="70">
                </center>
                <input type="file" name="imagen" id="imagen" accept="image/jpeg,image/png" />
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12">
                @Html.LabelFor(model => model.CategoriaId)
                @Html.DropDownListFor(model => model.CategoriaId, new SelectList(Model.CategoriasList, "Id", "Nombre"), "--Elige una categoría--", new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.CategoriaId, "", new { @class = "text-danger" })
            </div>

            <div class="col-lg-12 col-md-12 col-sm-12">
                @Html.LabelFor(model => model.ISBN)
                @Html.TextBoxFor(model => model.ISBN, new { @class = "form-control", @placeholder = "Ingresa el ISBN del libro..." })
                @Html.ValidationMessageFor(model => model.ISBN, "", new { @class = "text-danger" })
            </div>

            <div class="col-lg-12 col-md-12 col-sm-12">
                @Html.LabelFor(model => model.Titulo)
                @Html.TextBoxFor(model => model.Titulo, new { @class = "form-control", @placeholder = "Ingresa el título del libro" })
                @Html.ValidationMessageFor(model => model.Titulo, "", new { @class = "text-danger" })
            </div>

            <div class="col-lg-12 col-md-12 col-sm-12">
                @Html.LabelFor(model => model.Autor)
                @Html.TextBoxFor(model => model.Autor, new { @class = "form-control", @placeholder = "Ingresa el autor del libro"})
                @Html.ValidationMessageFor(model => model.Autor, "", new { @class = "text-danger" })
            </div>

            <div class="col-lg-12 col-md-12 col-sm-12">
                @Html.LabelFor(model => model.Descripcion)
                @Html.TextAreaFor(model => model.Descripcion, new { @class = "form-control", @placeholder = "Ingresa la descripción del libro..." })
                @Html.ValidationMessageFor(model => model.Descripcion, "", new { @class = "text-danger" })
            </div>

            <div class="col-lg-6 col-md-12 col-sm-12">
                @Html.LabelFor(model => model.Precio)
                @Html.TextBoxFor(model => model.Precio, new { @class = "form-control", @placeholder = "Ingresa el precio del libro..." })
                @Html.ValidationMessageFor(model => model.Precio, "", new { @class = "text-danger" })
            </div>

            <div class="col-lg-6 col-md-12 col-sm-12">
                @Html.LabelFor(model => model.Cantidad)
                @Html.TextBoxFor(model => model.Cantidad, new { @class = "form-control", @placeholder = "Ingresa la cantidad de libros..." })
                @Html.ValidationMessageFor(model => model.Cantidad, "", new { @class = "text-danger" })
            </div>

            <div class="col-lg-6 col-md-12 col-sm-12">
                @Html.LabelFor(model => model.FechaPublicacion)
                @Html.TextBoxFor(model => model.FechaPublicacion, "{0:yyyy-MM-dd}", new { @class = "form-control", @type = "date" })
                @Html.ValidationMessageFor(model => model.FechaPublicacion, "", new { @class = "text-danger" })
            </div>

            <div class="float-end col-lg-6 col-md-12 col-sm-12">
                
                <button type="submit" class="btn btn-primary mt-4"><i class="bi bi-save"></i> Guardar</button>
            </div>

        </div>
        
</form>
    
@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    @{

        <script src="~/js/previsualizarImagen.js" type="text/javascript"></script>
        <script>
            document.getElementById('imagen').addEventListener('change', function (event) {
                        const [file] = event.target.files;
                        if (file) {
                            document.getElementById('preview').src = URL.createObjectURL(file);
                        }
                    });
        </script>

    }
}